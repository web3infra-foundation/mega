import Head from 'next/head'
// import Image from 'next/image'
import { AppLayout } from '@/components/Layout/AppLayout'
import AuthAppProviders from '@/components/Providers/AuthAppProviders'
// import { useState } from 'react'    
// import { ExclamationTriangleIcon, ShieldCheckIcon, ClockIcon, UserIcon } from '@heroicons/react/24/outline'
import { useRouter } from 'next/router'

export default function CVEInfoPage() {
  // const [activeTab, setActiveTab] = useState('overview')
  const router = useRouter()
  const { cveId } = router.query

  // 模拟 CVE 数据 - 根据 cveId 获取不同的数据
  const getCveData = (id: string) => {
    const cveDataMap = {
      'CVE-2023-12345': {
        id: 'CVE-2023-12345',
        title: 'Rust 标准库中的内存安全漏洞',
        severity: 'HIGH',
        status: 'FIXED',
        publishedDate: '2023-12-15',
        updatedDate: '2023-12-20',
        cvssScore: 8.5,
        description: 'AsLdrSrv.exe in ASUS ATK Package before V1.0.0061 (for Windows 10 notebook PCs) could lead to unsigned code execution with no additional execution. The user must put an application at a particular path, with a particular file name.',
        affectedVersions: ['1.70.0', '1.71.0', '1.72.0'],
        fixedVersions: ['1.73.0'],
        tag: { text: '由国际安全组织报告', color: 'blue' },
        references: [
          { title: 'Rust Security Advisory', url: 'https://blog.rust-lang.org/2023/12/15/security-advisory.html' },
          { title: 'GitHub Issue', url: 'https://github.com/rust-lang/rust/issues/12345' }
        ],
        details: {
          overview: '这是一个在 Rust 标准库中发现的内存安全漏洞，影响多个版本的 Rust 编译器。',
          impact: '该漏洞可能导致程序崩溃、内存泄漏或潜在的安全问题。',
          solution: '建议升级到 Rust 1.73.0 或更高版本。',
          workaround: '如果无法立即升级，可以避免使用受影响的函数。'
        }
      },
      'CVE-2023-12346': {
        id: 'CVE-2023-12346',
        title: 'Rust 编译器中的类型安全漏洞',
        severity: 'MEDIUM',
        status: 'PENDING',
        publishedDate: '2023-12-18',
        updatedDate: '2023-12-22',
        cvssScore: 6.5,
        description: '在 Rust 编译器的类型检查系统中发现了一个潜在的类型安全漏洞。',
        affectedVersions: ['1.69.0', '1.70.0', '1.71.0'],
        fixedVersions: ['1.72.0'],
        tag: { text: '修复补丁已发布', color: 'green' },
        references: [
          { title: 'Rust Security Advisory', url: 'https://blog.rust-lang.org/2023/12/18/security-advisory.html' },
          { title: 'GitHub Issue', url: 'https://github.com/rust-lang/rust/issues/12346' }
        ],
        details: {
          overview: '这是一个在 Rust 编译器类型检查系统中发现的漏洞。',
          impact: '该漏洞可能导致类型检查错误，影响编译安全性。',
          solution: '建议升级到 Rust 1.72.0 或更高版本。',
          workaround: '可以暂时禁用某些高级类型检查功能。'
        }
      }
    }
    
    return cveDataMap[id as keyof typeof cveDataMap] || cveDataMap['CVE-2023-12345']
  }

  const cveData = getCveData(cveId as string)

//   const tabs = [
//     { id: 'overview', name: '概览', icon: ExclamationTriangleIcon },
//     { id: 'details', name: '详细信息', icon: ShieldCheckIcon },
//     { id: 'timeline', name: '时间线', icon: ClockIcon },
//     { id: 'references', name: '参考资料', icon: UserIcon }
//   ]

  return (
    <>
      <Head>
        <title>{cveData.id} - CVE Information</title>
      </Head>
      <div className="min-h-screen h-auto w-full bg-white">
        {/* 顶部 CVE ID 和标签区域 */}
        <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-4">
              <h1 className="text-3xl font-bold text-gray-900">{cveData.id}</h1>
              {cveData.tag && (
                <span 
                  style={{
                    display: 'inline-flex',
                    padding: '2px 6px',
                    justifyContent: 'center',
                    alignItems: 'center',
                    gap: '6px',
                    borderRadius: '3px',
                    background: '#0047f112',
                    color: '#002bb7c4',
                    fontFamily: 'HarmonyOS Sans SC',
                    fontSize: '12px',
                    fontStyle: 'normal',
                    fontWeight: 400,
                    lineHeight: '16px',
                    letterSpacing: '0.04px',
                  }}
                >
                  {cveData.tag.text}
                </span>
              )}
            </div>
            <button className="flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
              <img 
                src="/rust/rust-ecosystem/ecosystem-cve/cve-info/Frame.png" 
                alt="Frame" 
                className="w-4 h-4 mr-2"
              />
              View Json
            </button>
          </div>
          
          {/* 分割线 */}
          <div className="mt-6 -mx-52 border-b border-gray-200"></div>
        </div>

                 {/* 主要内容区域 */}
         <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
          <h2 
            className="text-gray-900 mb-6"
            style={{
              color: '#1c2024',
              fontFamily: 'HarmonyOS Sans SC',
              fontSize: '26px',
              fontStyle: 'normal',
              fontWeight: 500,
              lineHeight: 'normal',
              letterSpacing: 'var(--Typography-Letter-spacing-3, 0)',
            }}
          >
            Required CVE Record Information
          </h2>
          
          {/* 信息卡片 */}
          <div className="space-y-6">
            {/* CNA 卡片 */}
            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                             <h3 
                 className="mb-4"
                 style={{
                   alignSelf: 'stretch',
                   color: '#3a5bc7',
                   fontFamily: 'HarmonyOS Sans SC',
                   fontSize: '32px',
                   fontStyle: 'normal',
                   fontWeight: 500,
                   lineHeight: '40px',
                   letterSpacing: '-0.16px',
                 }}
               >
                 CNA : MITRE Corporation
               </h3>
               <div 
                 style={{
                   width: '100%',
                   height: '1px',
                   background: 'rgba(0, 0, 0, 0.08)',
                   marginBottom: '16px'
                 }}
               />
              <div className="space-y-4">
                <div>
                  <h4 
                    className="mb-2"
                    style={{
                      alignSelf: 'stretch',
                      color: '#1c2024',
                      fontFamily: 'HarmonyOS Sans SC',
                      fontSize: '24px',
                      fontStyle: 'normal',
                      fontWeight: 500,
                      lineHeight: 'normal',
                      letterSpacing: '-0.16px',
                    }}
                  >
                    Description
                  </h4>
                  <p 
                    className="mb-6"
                    style={{
                      alignSelf: 'stretch',
                      color: '#80838d',
                      fontFamily: 'HarmonyOS Sans SC',
                      fontSize: '16px',
                      fontStyle: 'normal',
                      fontWeight: 400,
                      lineHeight: 'normal',
                      letterSpacing: '-0.16px',
                    }}
                  >
                    {cveData.description}
                  </p>
                </div>
                
                <div>
                  <div className="flex items-center mb-2">
                    <h4 
                      className="mb-0"
                      style={{
                        alignSelf: 'stretch',
                        color: '#1c2024',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '24px',
                        fontStyle: 'normal',
                        fontWeight: 500,
                        lineHeight: 'normal',
                        letterSpacing: '-0.16px',
                      }}
                    >
                      Product Status
                    </h4>
                    <button 
                      className="ml-2 hover:bg-blue-200"
                      style={{
                        display: 'flex',
                        height: '24px',
                        padding: '0 8px',
                        justifyContent: 'center',
                        alignItems: 'center',
                        gap: '4px',
                        borderRadius: '3px',
                        border: '1px solid #0034dc73',
                        background: 'transparent',
                        color: '#002bb7c4',
                        fontFamily: 'SF Pro',
                        fontSize: '12px',
                        fontStyle: 'normal',
                        fontWeight: 500,
                        lineHeight: '16px',
                        letterSpacing: '0.04px',
                      }}
                    >
                      Learn More
                    </button>
                  </div>
                  <div className="flex items-center justify-between">
                    <span 
                      style={{
                        alignSelf: 'stretch',
                        color: '#80838d',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '16px',
                        fontStyle: 'normal',
                        fontWeight: 400,
                        lineHeight: 'normal',
                        letterSpacing: '-0.16px',
                      }}
                    >
                      Information not provided
                    </span>
                  </div>
                </div>
                
                <div>
                  <div className="flex items-center mb-2">
                    <h4 
                      style={{
                        alignSelf: 'stretch',
                        color: '#1c2024',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '24px',
                        fontStyle: 'normal',
                        fontWeight: 500,
                        lineHeight: 'normal',
                        letterSpacing: '-0.16px',
                      }}
                    >
                      References
                    </h4>
                    <span 
                      className="ml-2"
                      style={{
                        display: 'flex',
                        padding: '2px 6px',
                        justifyContent: 'center',
                        alignItems: 'center',
                        gap: '6px',
                        borderRadius: '3px',
                        background: '#0047f112',
                        color: '#002bb7c4',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '12px',
                        fontStyle: 'normal',
                        fontWeight: 400,
                        lineHeight: '16px',
                        letterSpacing: '0.04px',
                        marginTop: '4px',
                      }}
                    >
                      3 Total
                    </span>
                  </div>
                  <div className="space-y-2">
                    {cveData.references.map((ref) => (
                      <a
                        key={ref.url}
                        href={ref.url}
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                          alignSelf: 'stretch',
                          color: '#002bb7c4',
                          fontFamily: 'HarmonyOS Sans SC',
                          fontSize: '16px',
                          fontStyle: 'normal',
                          fontWeight: 300,
                          lineHeight: 'normal',
                          letterSpacing: '-0.1px',
                        }}
                        className="block hover:text-blue-800"
                      >
                        {ref.url}
                      </a>
                    ))}
                  </div>
                </div>
                
                                 <div 
                   style={{
                     alignSelf: 'stretch',
                     color: '#1c2024',
                     fontFamily: 'HarmonyOS Sans SC',
                     fontSize: '16px',
                     fontStyle: 'normal',
                     fontWeight: 500,
                     lineHeight: 'normal',
                     letterSpacing: '-0.16px',
                   }}
                 >
                                       <p>
                      <span style={{ fontWeight: 500, color: '#1c2024', fontSize: '16px' }}>Published: </span>
                      <span style={{ fontWeight: 400, color: '#80838d', fontSize: '16px' }}>{cveData.publishedDate}</span>
                    </p>
                    <p>
                      <span style={{ fontWeight: 500, color: '#1c2024', fontSize: '16px' }}>Updated: </span>
                      <span style={{ fontWeight: 400, color: '#80838d', fontSize: '16px' }}>{cveData.updatedDate}</span>
                    </p>
                 </div>
              </div>
            </div>

                         {/* CVE Program 卡片 */}
             <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
               <h3 
                 className="mb-4"
                 style={{
                   alignSelf: 'stretch',
                   color: '#3a5bc7',
                   fontFamily: 'HarmonyOS Sans SC',
                   fontSize: '32px',
                   fontStyle: 'normal',
                   fontWeight: 500,
                   lineHeight: '40px',
                   letterSpacing: '-0.16px',
                 }}
               >CVE : Program</h3>
               <div 
                 style={{
                   width: '100%',
                   height: '1px',
                   background: 'rgba(0, 0, 0, 0.08)',
                   marginBottom: '16px'
                 }}
               />
              
              <div className="space-y-4">
                <div>
                  <div className="flex items-center mb-2">
                    <h4 
                      style={{
                        alignSelf: 'stretch',
                        color: '#1c2024',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '24px',
                        fontStyle: 'normal',
                        fontWeight: 500,
                        lineHeight: 'normal',
                        letterSpacing: '-0.16px',
                      }}
                    >
                      References
                    </h4>
                    <span 
                      className="ml-2"
                      style={{
                        display: 'flex',
                        padding: '2px 6px',
                        justifyContent: 'center',
                        alignItems: 'center',
                        gap: '6px',
                        borderRadius: '3px',
                        background: '#0047f112',
                        color: '#002bb7c4',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '12px',
                        fontStyle: 'normal',
                        fontWeight: 400,
                        lineHeight: '16px',
                        letterSpacing: '0.04px',
                        marginTop: '4px',
                      }}
                    >
                      2 Total
                    </span>
                  </div>
                  <div className="space-y-2">
                    <a 
                      href="https://safebreach.com/blog" 
                      target="_blank" 
                      rel="noopener noreferrer" 
                      style={{
                        alignSelf: 'stretch',
                        color: '#002bb7c4',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '16px',
                        fontStyle: 'normal',
                        fontWeight: 300,
                        lineHeight: 'normal',
                        letterSpacing: '-0.1px',
                      }}
                      className="block hover:text-blue-800"
                    >
                      https://safebreach.com/blog
                    </a>
                    <a 
                      href="https://www.asus.com/support/faq/1041545" 
                      target="_blank" 
                      rel="noopener noreferrer" 
                      style={{
                        alignSelf: 'stretch',
                        color: '#002bb7c4',
                        fontFamily: 'HarmonyOS Sans SC',
                        fontSize: '16px',
                        fontStyle: 'normal',
                        fontWeight: 300,
                        lineHeight: 'normal',
                        letterSpacing: '-0.1px',
                      }}
                      className="block hover:text-blue-800"
                    >
                      https://www.asus.com/support/faq/1041545
                    </a>
                  </div>
                </div>
                
                                 <div 
                   style={{
                     alignSelf: 'stretch',
                     color: '#1c2024',
                     fontFamily: 'HarmonyOS Sans SC',
                     fontSize: '16px',
                     fontStyle: 'normal',
                     fontWeight: 500,
                     lineHeight: 'normal',
                     letterSpacing: '-0.16px',
                   }}
                 >
                                       <p>
                      <span style={{ fontWeight: 500, color: '#1c2024', fontSize: '16px' }}>Updated: </span>
                      <span style={{ fontWeight: 400, color: '#80838d', fontSize: '16px' }}>{cveData.updatedDate}</span>
                    </p>
                 </div>
                
                <p 
                  style={{
                    alignSelf: 'stretch',
                    color: '#80838d',
                    fontFamily: 'HarmonyOS Sans SC',
                    fontSize: '16px',
                    fontStyle: 'normal',
                    fontWeight: 400,
                    lineHeight: 'normal',
                    letterSpacing: '-0.16px',
                    marginTop: '4px',
                  }}
                >
                  This container includes required additional information provided by the CVE Program for this vulnerability.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  )
}

CVEInfoPage.getProviders = (page: any, pageProps: any) => {
  return (
    <AuthAppProviders {...pageProps}>
      <AppLayout {...pageProps}>{page}</AppLayout>
    </AuthAppProviders>
  )
}
