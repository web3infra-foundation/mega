# =============================================================================
# Mega Dev Image - Environment Configuration (Client Toolchain)
# =============================================================================
# Copy this file to .env and modify as needed.
#
# This image provides:
# - Scorpio daemon (FUSE + HTTP API)
# - Orion Worker (optional; connects to external Orion Server)
# - Buck2 CLI
#
# NOTE: Scorpio needs a running Mono (Mega main service) to fetch repository content.
# Configure `SCORPIO_BASE_URL` / `SCORPIO_LFS_URL` to point to Mono.

# ---------------------------------------------------------------------------
# Common
# ---------------------------------------------------------------------------
RUST_LOG=info

# ---------------------------------------------------------------------------
# Scorpio (daemon) Configuration
# ---------------------------------------------------------------------------
# Mono/Mega service URL (required for real mounts)
SCORPIO_BASE_URL=http://host.docker.internal:8000
SCORPIO_LFS_URL=http://host.docker.internal:8000

# Scorpio HTTP port
SCORPIO_PORT=2725

# Store path for Scorpio data (inside container)
SCORPIO_STORE_PATH=/data/scorpio/store

# Workspace root (inside container)
SCORPIO_WORKSPACE=/workspace/mount

# Git author info used by Scorpio operations
SCORPIO_GIT_AUTHOR=MEGA
SCORPIO_GIT_EMAIL=admin@mega.org

# DicFuse configuration
SCORPIO_DICFUSE_READABLE=true
SCORPIO_LOAD_DIR_DEPTH=3
SCORPIO_FETCH_FILE_THREAD=10

# ---------------------------------------------------------------------------
# Orion Worker (optional) Configuration
# ---------------------------------------------------------------------------
# Orion Server WebSocket URL (external service)
SERVER_WS=ws://host.docker.internal:8004/ws

# Optional fixed worker id (otherwise generated per session)
# ORION_WORKER_ID=

# Worker local paths (inside container)
BUCK_PROJECT_ROOT=/workspace
BUILD_TMP=/tmp/orion-builds

# Scorpio API base URL used by the worker
# - When ORION_WORKER_START_SCORPIO=true, this is usually the embedded Scorpio.
SCORPIO_API_BASE_URL=http://127.0.0.1:2725

# Start embedded Scorpio inside the worker container (recommended when the worker needs mounts)
ORION_WORKER_START_SCORPIO=true

# ---------------------------------------------------------------------------
# Buck2 Configuration
# ---------------------------------------------------------------------------
BUCK2_ISOLATION_DIR=/tmp/buck2-isolation

